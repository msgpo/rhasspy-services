#!/usr/bin/env bash
program_name="$(basename "$0")"

if [[ -z "$1" ]]; then
    echo "Usage: ${program_name} WAV"
    exit 1
fi

wav_path="$(realpath "$1")"

gst-launch-1.0 \
    filesrc "location=${wav_path}" ! \
    wavparse ! \
    audioconvert ! \
    audioresample ! \
    audio/x-raw, rate=16000, channels=1, format=S16LE ! \
    filesink location=/dev/stdout
